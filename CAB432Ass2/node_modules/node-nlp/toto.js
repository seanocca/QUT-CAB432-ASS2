const { NlpManager } = require('./lib');

async function main() {
  let manager = new NlpManager({ ner: { builtins: [] } });
  manager.addLanguage(['en']);
  manager.addNamedEntityText(
    'hero',
    'spiderman',
    ['en'],
    ['Spiderman', 'Spider-man']
  );
  manager.addNamedEntityText(
    'hero',
    'iron man',
    ['en'],
    ['iron man', 'iron-man']
  );
  manager.addNamedEntityText('hero', 'thor', ['en'], ['Thor']);
  manager.addNamedEntityText(
    'food',
    'burguer',
    ['en'],
    ['Burguer', 'Hamburguer']
  );
  manager.addNamedEntityText('food', 'pizza', ['en'], ['pizza']);
  manager.addNamedEntityText(
    'food',
    'pasta',
    ['en'],
    ['Pasta', 'spaghetti']
  );
  manager.addRegexEntity(
    'mail',
    'en',
    /\b(\w[-._\w]*\w@\w[-._\w]*\w\.\w{2,3})\b/gi
  );
  manager.addDocument('en', 'I saw %hero% eating %food%', 'sawhero');
  manager.addDocument(
    'en',
    'I have seen %hero%, he was eating %food%',
    'sawhero'
  );
  manager.addDocument('en', 'I want to eat %food%', 'wanteat');
  manager.assignDomain('sawhero', 'domain');
  
  await manager.train();
  // save current model as JSON string
  const model = manager.export();
  manager = new NlpManager();
  // load model from JSON String
  manager.import(model);
  const result = await manager.process(
    'I saw spiderman eating spaghetti today in the city!'
  );
}

main();
